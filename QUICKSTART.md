# ShotAI 快速开始 🚀

## 5分钟启动应用

```bash
# 1. 进入项目目录
cd /Users/justin/Desktop/运动科学力传导可视化

# 2. 安装依赖
npm install

# 3. 配置环境变量
cp .env.local.example .env.local
# 编辑 .env.local 填入 Supabase 信息

# 4. 启动开发服务器
npm run dev

# 5. 打开浏览器访问
open http://localhost:3000
```

---

## 用户旅程

```
┌─────────────────────────────────────────────────────────────┐
│  1. 访问首页                                                 │
│     └── http://localhost:3000                               │
│                                                             │
│  2. 阅读AI能力边界                                          │
│     └── 点击"了解更多"了解能做什么/不能做什么                │
│                                                             │
│  3. 查看拍摄指南                                            │
│     └── 学习3步正确拍摄方法                                 │
│                                                             │
│  4. 上传视频                                                │
│     └── 拖拽视频文件 → 选择角度 → 开始分析                  │
│                                                             │
│  5. 等待分析                                                │
│     └── 30-60秒自动完成，实时显示进度                       │
│                                                             │
│  6. 查看报告                                                │
│     └── 免费看3维度，付费解锁完整9维度分析                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 核心页面速查

| 功能 | 访问路径 | 用途 |
|------|----------|------|
| 🏠 首页 | `/` | 上传入口、产品介绍 |
| 📸 拍摄指南 | `/guide` | 学习正确拍摄方法 |
| 🤖 AI边界 | `/about` | 了解系统能力边界 |
| ⬆️ 上传视频 | `/upload` | 视频上传和分析配置 |
| ⏳ 分析进度 | `/analysis/[id]/waiting` | 实时查看分析进度 |
| 📊 分析报告 | `/analysis/[id]/result` | 查看9维度分析结果 |

---

## 拍摄要点

### ✅ 推荐做法
- **侧面视角**（与投篮方向垂直）
- **全身可见**（头顶到脚底）
- **光线充足**，避免逆光
- **画面稳定**，手机不要抖动
- **背景简洁**，避免杂乱

### ❌ 避免做法
- 正面/背面拍摄（误差大增）
- 光线不足或逆光
- 画面只拍到半身
- 手抖导致画面晃动
- 背景复杂有遮挡

---

## 技术要点

### 测量精度
- **侧面视角**: ±15° 误差
- **正面视角**: ±20-25° 误差
- **其他角度**: ±25°+ 误差（不推荐）

### 分析维度（免费预览3个）
1. **动作一致性** ⭐ 最重要（命中率预测因子 r=-0.96）
2. **关节角度** （误差透明标注）
3. **左右对称性**

### 付费解锁（¥9.9）
- 全部9维度完整分析
- AI个性化训练计划
- 3D骨骼可视化
- 时序曲线图
- 动力链协调性评估

---

## 环境变量配置

创建 `.env.local` 文件：

```env
# 必填：Supabase 配置
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# 可选：千问API（用于AI报告生成）
QWEN_API_KEY=your-qwen-api-key
```

**获取 Supabase 凭证：**
1. 登录 [supabase.com](https://supabase.com)
2. 创建新项目
3. Project Settings > API > URL / Anon Key
4. Project Settings > Service Role > Service Role Key

**设置数据库：**
在 Supabase SQL Editor 中执行 `supabase/migrations/` 目录下的5个SQL文件。

---

## 常见问题

### Q: 为什么强调侧面视角？
**A**: 侧面视角可以最清晰地观察投篮动作的关节角度变化。正面视角会被身体遮挡很多关键点，导致误差增大到±20-25°。

### Q: 分析需要多长时间？
**A**: 通常30-60秒。包括：视频上传（取决于网速）→姿态检测→动作分析→报告生成。

### Q: AI能帮我提高命中率吗？
**A**: 不能直接保证。AI分析动作一致性并提供改进建议，但命中率还受心理因素、防守压力、训练执行等影响。研究表明动作一致性与命中率高度相关（r=-0.96），但"机械改进≠立即命中率提升"。

### Q: 为什么有些维度显示"锁定"？
**A**: 免费版本只开放3个核心维度预览。付费¥9.9解锁全部9维度分析、AI训练计划和可视化。

### Q: 测量误差是什么意思？
**A**: 基于视频的关节角度测量存在固有误差（±15°）。这不是bug，而是计算机视觉技术的局限。我们明确标注误差范围，体现"科学诚实"原则。

---

## 项目结构

```
shotai/
├── app/                    # Next.js 页面
│   ├── page.tsx           # 首页
│   ├── guide/             # 拍摄指南
│   ├── upload/            # 视频上传
│   ├── about/             # AI能力边界
│   ├── analysis/          # 分析流程
│   └── api/               # API路由
├── lib/                   # 工具库
│   ├── supabase/          # 数据库客户端
│   ├── queue/             # 任务队列
│   └── utils.ts          # 工具函数
├── types/                 # TypeScript类型
├── supabase/migrations/   # 数据库迁移
└── doc/                   # 项目文档
```

---

## 下一步开发

当前完成 **Week 5-6: 核心架构MVP** ✅

即将开发：
- **Week 7-8**: MediaPipe姿态检测 + 9维度分析算法
- **Week 9-10**: AI报告生成 + 3D可视化
- **Week 11-12**: 微信支付 + 命中率追踪
- **Week 13-16**: 测试优化 + 正式发布

---

**详细文档**: 查看 `USAGE.md` 和 `doc/` 目录

**开始体验**: 运行 `npm run dev` 并访问 http://localhost:3000 🏀
